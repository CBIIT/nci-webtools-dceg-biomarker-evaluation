<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <script src="http://code.jquery.com/jquery-1.10.2.min.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="shiny.css"/>
  <link rel="stylesheet" type="text/css" href="bootstrap.min.css"/>
  <script src="bootstrap.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" type="text/css" href="bootstrap-responsive.min.css"/>
  <title>Age Period Cohort Analysis Tool</title>
  <link rel="stylesheet" type="text/css" href="DT_bootstrap.css"/>
  <script src="jquery.dataTables.min.js"></script>
  <script src="DT_bootstrap.js"></script>
</head>

<body>
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12" style="padding: 10px 0px;">
      <h1>Age Period Cohort Analysis Tool</h1>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
      <form class="well">
        <label for="title">Name your Data</label>
        <input id="title" type="text" value="Female Pancreas Cancer"/>
        <label for="startYear">Choose the start Year for the Period interval</label>
        <input id="startYear" type="number" value="1993" step="1"/>
        <label for="startAge">Choose the start Age for the Age interval</label>
        <input id="startAge" type="number" value="33" min="1" max="120" step="1"/>
        <label class="control-label" for="interval">Choose the Interval</label>
        <select id="interval">
          <option value="year1">1 year</option>
          <option value="year2">2 years</option>
          <option value="year3">3 years</option>
          <option value="year4" selected="selected">4 years</option>
          <option value="year5">5 years</option>
        </select>
        <label>Choose either to upload a CSV w/ count and population data
         or cut and paste data from a spreadsheet by right clicking on the table to the right
         and clicking paste:</label>
        <input id="countPopulation" type="file" accept="text,text/plain"/>
        <div id="countPopulation_progress" class="progress progress-striped active shiny-file-input-progress"></div>
        <div class="bar"></div>
        <label></label>
        <div class="tabbable">
          <ul class="nav nav-tabs">
            <li class="active">
              <a href="#tab-4458-21" data-toggle="tab">Help/Walk-Through</a>
            </li>
            <li>
              <a href="#tab-4458-7" data-toggle="tab">Coefficients</a>
            </li>
            <li>
              <a href="#tab-4458-18" data-toggle="tab">Wald Tests</a>
            </li>
            <li>
              <a href="#tab-4458-19" data-toggle="tab">Glossary</a>
            </li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-4458-21">
              <!-- <div id="helpExample"> -->
                This application accepts data formatted in columns organized into
                <b><i>Count</i></b> and <b><i>Population</i></b> for a given period.
                An example set of data can be seen by clicking the <b><i>Help/Example Data Tab</i></b>
                to the right. 
                <h3>Demonstration:</h3>
                <ol>
                  <li>
                    Click on the Help/Example Tab on the right 
                  </li>
                  <li>
                    After noting the layout of the data, click on the button labled Load Example Data.
                  </li>
                  <li>
                    Click on the Input tab on the right. Note that the example data has been loaded
                    into the input table.
                  </li>
                  <li>
                    Set the default values on the left as follows
                      <br/><b>Name:</b> <i>Female Pancreas Cancer Data</i>
                      <br/><b>Start Year:</b> <i>1993</i>
                      <br/><b>Start Age:</b> <i>33</i>
                      <br/><b>Interval:</b> <i>4 years</i>
                  </li>
                  <li>
                    Click on the <i>Calculate</i> button on the bottom left of the Input tab.
                  </li>
                  <li>
                    Click through the tabs on the left and right to observe results.
                  </li>
                </ol>
                    <b>NOTE:</b> For additional help, issues, comments, or suggestions, please contact:
                    <br/><b>Algorithm/Graph Design:</b> <a href="mailto:david.check@nih.gov">David Check</a>
                    <br/><b>Application Design/CRAN Package:</b> <a href="mailto:brent.coffey@nih.gov">Brent D. Coffey</a> 
              <!-- </div> -->
            </div>
            <div class="tab-pane" id="tab-4458-7">
              <div id="coefficients" ></div>
            </div>
            <div class="tab-pane" id="tab-4458-18">
              <div id="waldTests" ></div>
            </div>
            <div class="tab-pane" id="tab-4458-19">
              <div id="glossary"></div>
            </div>
          </div>
        <!-- </div> -->
      </form>
    </div>
  </div>
  <div class="span8">
    <div class="tabbable">
      <ul class="nav nav-tabs">
        <li class="active">
          <a href="#tab-4458-1" data-toggle="tab">Input</a>
        </li>
        <li>
          <a href="#tab-4458-8" data-toggle="tab">Age Deviations</a>
        </li>
        <li>
          <a href="#tab-4458-9" data-toggle="tab">Per Deviations</a>
        </li>
        <li>
          <a href="#tab-4458-10" data-toggle="tab">Coh Deviations</a>
        </li>
        <li>
          <a href="#tab-4458-11" data-toggle="tab">Long Age</a>
        </li>
        <li>
          <a href="#tab-4458-12" data-toggle="tab">Cross Age</a>
        </li>
        <li>
          <a href="#tab-4458-13" data-toggle="tab">Long 2 CrossRR</a>
        </li>
        <li>
          <a href="#tab-4458-14" data-toggle="tab">Fitted Temporal Trend</a>
        </li>
        <li>
          <a href="#tab-4458-15" data-toggle="tab">PeriodRR</a>
        </li>
        <li>
          <a href="#tab-4458-16" data-toggle="tab">CohortRR</a>
        </li>
        <li>
          <a href="#tab-4458-17" data-toggle="tab">Local Drifts</a>
        </li>
        <li>
          <a href="#tab-4458-20" data-toggle="tab">Help/Example Data</a>
        </li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="tab-4458-1">
          <div id="inputData">
            <!-- Larry's Imports -->
            <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.js"></script> 
            <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css"/>
            <link rel="stylesheet" href="apc.css">
            <script src="apc.js"></script>
            <!-- ****** -->
            <!-- Larry's code here -->
            <table id='main-table' class='input' style="margin: 5px;">
              <tr>
                <td >&nbsp;</td>
                <td class='header border-dotted-bottom border-left border-top'>&nbsp;</td>
                <td id='table-title' colspan='8' class='header border-dotted-bottom border-right border-dotted-left border-top'>Breast Cancer, SEER 13</td>
              </tr>
              <tr>
                <th></th>
                <td class='header border-left'></th>
                <td colspan='2' class='header border-dotted-left' id='year_1_year'>1998 - 2001</td>
                <td colspan='2' class='header border-dotted-left' id='year_2_year'>2002 - 2005</td>
                <td colspan='2' class='header border-dotted-left' id='year_3_year'>2006 - 2009</td>
                <td colspan='2' class='header border-dotted-left border-right' id='year_4_year'>2010 - 2013</td>
              </tr>
              <tr>
                <th></th>
                <td class='header border-bottom border-left'>Age
                </th>
                <th class='header border-bottom border-dotted-left'>Count</th>
                <th class='header border-bottom'>Population</th>
                <th class='header border-bottom border-dotted-left'>Count</th>
                <th class='header border-bottom'>Population</th>
                <th class='header border-bottom border-dotted-left'>Count</th>
                <th class='header border-bottom'>Population</th>
                <th class='header border-bottom border-dotted-left'>Count</th>
                <th class='header border-bottom border-right'>Population</th>
              </tr>
              <tr id='age_1_row'>
                <td id='row-title' rowspan='14' class='header vertical-text border-top border-bottom border-left'>Age at Diagnosis</td>
                <td id='age_1_age' class='header border-left'>&nbsp;
                  <textarea class='paste_area' rows='14' cols='58'></textarea>
                </td>
                <td id='age_1_year_1_count' class='data border-dotted-left'></td>
                <td id='age_1_year_1_pop' class='data'></td>
                <td id='age_1_year_2_count' class='data border-dotted-left'></td>
                <td id='age_1_year_2_pop' class='data'></td>
                <td id='age_1_year_3_count' class='data border-dotted-left'></td>
                <td id='age_1_year_3_pop' class='data'></td>
                <td id='age_1_year_4_count' class='data border-dotted-left'></td>
                <td id='age_1_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_2_row'>
                <th id='age_2_age' class='header border-left'>&nbsp;</th>
                <td id='age_2_year_1_count' class='data border-dotted-left'></td>
                <td id='age_2_year_1_pop' class='data'></td>
                <td id='age_2_year_2_count' class='data border-dotted-left'></td>
                <td id='age_2_year_2_pop' class='data'></td>
                <td id='age_2_year_3_count' class='data border-dotted-left'></td>
                <td id='age_2_year_3_pop' class='data'></td>
                <td id='age_2_year_4_count' class='data border-dotted-left'></td>
                <td id='age_2_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_3_row'>
                <th id='age_3_age' class='header border-left'>&nbsp;</th>
                <td id='age_3_year_1_count' class='data border-dotted-left'></td>
                <td id='age_3_year_1_pop' class='data'></td>
                <td id='age_3_year_2_count' class='data border-dotted-left'></td>
                <td id='age_3_year_2_pop' class='data'></td>
                <td id='age_3_year_3_count' class='data border-dotted-left'></td>
                <td id='age_3_year_3_pop' class='data'></td>
                <td id='age_3_year_4_count' class='data border-dotted-left'></td>
                <td id='age_3_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_4_row'>
                <th id='age_4_age' class='header border-left'>&nbsp;</th>
                <td id='age_4_year_1_count' class='data border-dotted-left'></td>
                <td id='age_4_year_1_pop' class='data'></td>
                <td id='age_4_year_2_count' class='data border-dotted-left'></td>
                <td id='age_4_year_2_pop' class='data'></td>
                <td id='age_4_year_3_count' class='data border-dotted-left'></td>
                <td id='age_4_year_3_pop' class='data'></td>
                <td id='age_4_year_4_count' class='data border-dotted-left'></td>
                <td id='age_4_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_5_row'>
                <th id='age_5_age' class='header border-left'>&nbsp;</th>
                <td id='age_5_year_1_count' class='data border-dotted-left'></td>
                <td id='age_5_year_1_pop' class='data'></td>
                <td id='age_5_year_2_count' class='data border-dotted-left'></td>
                <td id='age_5_year_2_pop' class='data'></td>
                <td id='age_5_year_3_count' class='data border-dotted-left'></td>
                <td id='age_5_year_3_pop' class='data'></td>
                <td id='age_5_year_4_count' class='data border-dotted-left'></td>
                <td id='age_5_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_6_row'>
                <th id='age_6_age' class='header border-left'>&nbsp;</th>
                <td id='age_6_year_1_count' class='data border-dotted-left'></td>
                <td id='age_6_year_1_pop' class='data'></td>
                <td id='age_6_year_2_count' class='data border-dotted-left'></td>
                <td id='age_6_year_2_pop' class='data'></td>
                <td id='age_6_year_3_count' class='data border-dotted-left'></td>
                <td id='age_6_year_3_pop' class='data'></td>
                <td id='age_6_year_4_count' class='data border-dotted-left'></td>
                <td id='age_6_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_7_row'>
                <th id='age_7_age' class='header border-left'>&nbsp;</th>
                <td id='age_7_year_1_count' class='data border-dotted-left'></td>
                <td id='age_7_year_1_pop' class='data'></td>
                <td id='age_7_year_2_count' class='data border-dotted-left'></td>
                <td id='age_7_year_2_pop' class='data'></td>
                <td id='age_7_year_3_count' class='data border-dotted-left'></td>
                <td id='age_7_year_3_pop' class='data'></td>
                <td id='age_7_year_4_count' class='data border-dotted-left'></td>
                <td id='age_7_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_8_row'>
                <th id='age_8_age' class='header border-left'>&nbsp;</th>
                <td id='age_8_year_1_count' class='data border-dotted-left'></td>
                <td id='age_8_year_1_pop' class='data'></td>
                <td id='age_8_year_2_count' class='data border-dotted-left'></td>
                <td id='age_8_year_2_pop' class='data'></td>
                <td id='age_8_year_3_count' class='data border-dotted-left'></td>
                <td id='age_8_year_3_pop' class='data'></td>
                <td id='age_8_year_4_count' class='data border-dotted-left'></td>
                <td id='age_8_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_9_row'>
                <th id='age_9_age' class='header border-left'>&nbsp;</th>
                <td id='age_9_year_1_count' class='data border-dotted-left'></td>
                <td id='age_9_year_1_pop' class='data'></td>
                <td id='age_9_year_2_count' class='data border-dotted-left'></td>
                <td id='age_9_year_2_pop' class='data'></td>
                <td id='age_9_year_3_count' class='data border-dotted-left'></td>
                <td id='age_9_year_3_pop' class='data'></td>
                <td id='age_9_year_4_count' class='data border-dotted-left'></td>
                <td id='age_9_year_4_pop' class='data border-right'></td> 
              </tr>
              <tr id='age_10_row'>
                <th id='age_10_age' class='header border-left'>&nbsp;</th>
                <td id='age_10_year_1_count' class='data border-dotted-left'></td>
                <td id='age_10_year_1_pop' class='data'></td>
                <td id='age_10_year_2_count' class='data border-dotted-left'></td>
                <td id='age_10_year_2_pop' class='data'></td>
                <td id='age_10_year_3_count' class='data border-dotted-left'></td>
                <td id='age_10_year_3_pop' class='data'></td>
                <td id='age_10_year_4_count' class='data border-dotted-left'></td>
                <td id='age_10_year_4_pop' class='data border-right'></td>  
              </tr>
              <tr id='age_11_row'>
                <th id='age_11_age' class='header border-left'>&nbsp;</th>
                <td id='age_11_year_1_count' class='data border-dotted-left'></td>
                <td id='age_11_year_1_pop' class='data'></td>
                <td id='age_11_year_2_count' class='data border-dotted-left'></td>
                <td id='age_11_year_2_pop' class='data'></td>
                <td id='age_11_year_3_count' class='data border-dotted-left'></td>
                <td id='age_11_year_3_pop' class='data'></td>
                <td id='age_11_year_4_count' class='data border-dotted-left'></td>
                <td id='age_11_year_4_pop' class='data border-right'></td>  
             </tr>
              <tr id='age_12_row'>
                <th id='age_12_age' class='header border-left'>&nbsp;</th>
                <td id='age_12_year_1_count' class='data border-dotted-left'></td>
                <td id='age_12_year_1_pop' class='data'></td>
                <td id='age_12_year_2_count' class='data border-dotted-left'></td>
                <td id='age_12_year_2_pop' class='data'></td>
                <td id='age_12_year_3_count' class='data border-dotted-left'></td>
                <td id='age_12_year_3_pop' class='data'></td>
                <td id='age_12_year_4_count' class='data border-dotted-left'></td>
                <td id='age_12_year_4_pop' class='data border-right'></td>  
              </tr>
              <tr id='age_13_row'>
                <th id='age_13_age' class='header border-left'>&nbsp;</th>
                <td id='age_13_year_1_count' class='data border-dotted-left'></td>
                <td id='age_13_year_1_pop' class='data'></td>
                <td id='age_13_year_2_count' class='data border-dotted-left'></td>
                <td id='age_13_year_2_pop' class='data'></td>
                <td id='age_13_year_3_count' class='data border-dotted-left'></td>
                <td id='age_13_year_3_pop' class='data'></td>
                <td id='age_13_year_4_count' class='data border-dotted-left'></td>
                <td id='age_13_year_4_pop' class='data border-right'></td>  
              </tr>
              <tr id='age_14_row'>
                <th id='age_14_age' class='header border-bottom border-left'>&nbsp;</th>
                <td id='age_14_year_1_count' class='data border-bottom border-dotted-left'></td>
                <td id='age_14_year_1_pop' class='data border-bottom'></td>
                <td id='age_14_year_2_count' class='data border-bottom border-dotted-left'></td>
                <td id='age_14_year_2_pop' class='data border-bottom'></td>
                <td id='age_14_year_3_count' class='data border-bottom border-dotted-left'></td>
                <td id='age_14_year_3_pop' class='data border-bottom'></td>
                <td id='age_14_year_4_count' class='data border-bottom border-dotted-left'></td>
                <td id='age_14_year_4_pop' class='data border-bottom border-right'></td>  
              </tr>
            </table>
            <!-- End Larry's Code and Send Data to Shiny -->
            <form>
              <button type="submit" id="calculate" class="btn btn-primary" style="float: left;">Calculate</button>
            </form>
          </div>
        </div>
        <div class="tab-pane" id="tab-4458-8">
          <div id="ageDeviationsGraph" style="width: 100% ; height: 500px"></div>
          <div id="ageDeviations"></div>
        </div>
        <div class="tab-pane" id="tab-4458-9">
          <div id="perDeviationsGraph" style="width: 100% ; height: 500px"></div>
          <div id="perDeviations" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-10">
          <div id="cohDeviationsGraph" style="width: 100% ; height: 500px"></div>
          <div id="cohDeviations" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-11">
          <div id="longAgeGraph" style="width: 100% ; height: 500px"></div>
          <div id="longAge" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-12">
          <div id="crossAgeGraph" style="width: 100% ; height: 500px"></div>
          <div id="crossAge" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-13">
          <div id="longCrossRRGraph" style="width: 100% ; height: 500px"></div>
          <div id="longCrossRR" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-14">
          <div id="fittedTemporalTrendsGraph" style="width: 100% ; height: 500px"></div>
          <div id="fittedTemporalTrends" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-15">
          <!-- <div id="periodRRGraph" style="width: 100% ; height: 500px"></div> -->
          <div>
            <table id="periodRR"></table>
          </div>
        </div>
        <div class="tab-pane" id="tab-4458-16">
          <div id="cohortRRGraph" style="width: 100% ; height: 500px"></div>
          <div id="cohortRR" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-17">
          <div id="localDriftsGraph" style="width: 100% ; height: 500px"></div>
          <div id="localDrifts" ></div>
        </div>
        <div class="tab-pane" id="tab-4458-20">
          <form>
            <p>Example data available as a
            <a href="https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=0AiA747YDxiD1dFRfSlNudmRSY3Y5b2dOYXBNbjdLNmc&exportFormat=csv">CSV file</a>, 
            <a href="https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=0AiA747YDxiD1dFRfSlNudmRSY3Y5b2dOYXBNbjdLNmc&exportFormat=xls">Microsoft Excel spreadsheet</a>, or view the raw data on 
            <a href="https://docs.google.com/spreadsheet/ccc?key=0AiA747YDxiD1dFRfSlNudmRSY3Y5b2dOYXBNbjdLNmc&usp=drive_web#gid=0" target="_blank">Google Docs.</a></p>
            <table id="exampleData-table" style="margin: 5px;"></table>
            <button type="submit" id="loadExampleData" class="btn btn-primary" style="float: left;">Load Example Data</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>